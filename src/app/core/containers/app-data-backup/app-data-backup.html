<p>
  <a href="" (click)="goBack($event)">Go back</a>
</p>

<h2>User settings</h2>

<div>
  <h3>Restore app data from file</h3>
  <p>
    <label for="upload-file"> Select file </label>
    <input
      id="upload-file"
      type="file"
      accept="application/json"
      (change)="onUploadFileSelected($event)"
    />
  </p>
  @if (store.isUploadDataFromFileLoading()) {
    <p>Uploading data...</p>
  }
  @if (store.uploadDataFromFileErrorMessage(); as errorMessage) {
    <p>{{ errorMessage }}</p>
  }
</div>

<div>
  <h3>Make a backup copy</h3>
  <p>
    <button
      [matButton]="'filled'"
      [disabled]="store.isDownloadDataLoading()"
      (click)="store.downloadData()"
    >
      Download app data
    </button>
  </p>
  @if (store.downloadDataErrorMessage(); as errorMessage) {
    <p>{{ errorMessage }}</p>
  }
</div>

<div>
  <h3>Default currency</h3>
  <p>
    <mat-form-field [appearance]="'outline'">
      <mat-label>Currency</mat-label>
      <mat-select
        [value]="userSettings.defaultCurrency()"
        (selectionChange)="setDefaultCurrency($event)"
      >
        @for (opt of currencyOptions; track opt.value) {
          <mat-option [value]="opt.value">{{ opt.label }}</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </p>
</div>
